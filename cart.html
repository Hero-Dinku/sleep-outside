<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sleep Outside | Cart</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo img {
            width: 40px;
            height: 40px;
        }
        
        .logo a {
            color: white;
            text-decoration: none;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .highlight {
            color: #f39c12;
        }
        
        .cart {
            position: relative;
        }
        
        .cart svg {
            width: 40px;
            height: 40px;
            fill: white;
        }
        
        .cart-counter {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .products h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 0.5rem;
        }
        
        .product-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .cart-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .cart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .cart-card__image {
            flex: 0 0 200px;
        }
        
        .cart-card__image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .cart-card__details {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }
        
        .card__name {
            font-size: 1.2rem;
            color: #2c3e50;
            text-decoration: none;
        }
        
        .card__name:hover {
            color: #3498db;
        }
        
        .cart-card__color {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .cart-card__quantity {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0.5rem 0;
        }
        
        .quantity-input {
            width: 60px;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
        }
        
        .remove-item {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .remove-item:hover {
            background-color: #c0392b;
        }
        
        .cart-card__price {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .cart-card__total {
            font-size: 1.1rem;
            color: #27ae60;
        }
        
        .cart-summary {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .cart-summary h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #2c3e50;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
        }
        
        .summary-line {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.8rem;
        }
        
        .total-line {
            border-top: 1px solid #eee;
            padding-top: 0.8rem;
            font-size: 1.2rem;
            margin-top: 0.5rem;
        }
        
        .checkout-btn {
            width: 100%;
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 1rem;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .checkout-btn:hover {
            background-color: #219653;
        }
        
        .empty-cart {
            text-align: center;
            padding: 3rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .empty-cart h3 {
            font-size: 1.5rem;
            color: #7f8c8d;
            margin-bottom: 1rem;
        }
        
        .empty-cart p {
            margin-bottom: 1.5rem;
        }
        
        .empty-cart a {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }
        
        .empty-cart a:hover {
            text-decoration: underline;
        }
        
        footer {
            text-align: center;
            padding: 2rem;
            background-color: #2c3e50;
            color: white;
            margin-top: 3rem;
        }
        
        footer a {
            color: #3498db;
            text-decoration: none;
            margin: 0 1rem;
        }
        
        footer a:hover {
            text-decoration: underline;
        }
        
        @media (max-width: 768px) {
            .cart-card {
                flex-direction: column;
            }
            
            .cart-card__image {
                flex: 0 0 150px;
            }
            
            .cart-summary {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="divider">
        <div class="logo">
            <img src="../images/noun_Tent_2517.svg" alt="tent image for logo" />
            <a href="../index.html">Sleep<span class="highlight">Outside</span></a>
        </div>
        
        <div class="cart">
            <a href="cart.html">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                    <path d="M18.9 32.6c1.1 2.4 2.5 3.3 5.4 3.3 1.6 0 3.6-0.3 5.9-0.6 3.2-0.5 6.9-1 11.2-1 2.1 0 4.3 0.1 6.4 0.3 2.1 0.1 4.2 0.3 6.1 0.3 3.2 0 5.2-0.4 5.9-1.2 2.7-2.7 2.8-8.8 2.9-14.6 0.1-6.7 0.2-14.5 4.6-18.7 -0.5 0-1 0-1.6 0 -14.2 0-37.5 0-41.1 0C15.6 6.2 14.9 23.6 18.9 32.6z" />
                    <path d="M90.1 29.7c1-3.3 1.5-7.3 1.5-11.2 0-9-2.7-18.8-8.6-18.8 -0.1 0-0.2 0-0.3 0L77.8-0.1c-0.3 0.2-0.8 0.3-1.1 0.4 0 0 0 0 0 0 -0.2 0-0.3 0-0.4 0 -4.5 0.1-7 1.8-8.4 4.9l8.9-0.1c-1.6 3.6-2.4 8.7-2.4 13.5 0 4.9 0.8 9.9 2.5 13.6l-12.3 0c-0.2 0.4-0.4 0.8-0.6 1.2 -0.2 0.4-0.4 0.7-0.6 1.1 -0.1 0.1-0.1 0.2-0.2 0.3 -0.3 0.4-0.5 0.7-0.9 1.1 0 0 0 0 0 0 0 0-0.1 0.1-0.1 0.1 -0.1 0.1-0.2 0.2-0.4 0.3 -0.2 0.1-0.4 0.3-0.6 0.4 0 0 0 0 0 0 -0.4 0.2-0.9 0.4-1.4 0.6 -1.3 0.4-2.9 0.6-4.9 0.7 -0.5 1.5-1.1 4.1 0 5.5l3.1 3.9 0 0.8c0 2.8-2.3 4.8-2.8 5.2l-3-3.8c0.3-0.2 0.5-0.5 0.7-0.8l-1.8-2.3c-2.2-2.7-1.8-6.3-1.2-8.7 -0.7 0-1.4-0.1-2-0.1 -2.1-0.1-4.3-0.3-6.2-0.3 -4.1 0-7.7 0.5-10.8 1 -1 0.2-2 0.3-3 0.4 -0.5 1.5-1.2 4.4-0.1 5.9l3.1 4 0 0.8c0 2.8-2.3 4.8-2.8 5.2l-3.1-3.8c0.3-0.2 0.6-0.6 0.7-0.9l-1.8-2.4c-2.1-2.8-1.8-6.3-1.2-8.7 -1.6-0.2-2.9-0.8-4-1.7h0c-0.8-0.6-1.4-1.4-2-2.4 -0.1-0.1-0.2-0.3-0.2-0.5 -0.1-0.2-0.2-0.4-0.3-0.6 -0.3-0.6-0.5-1.2-0.7-1.8l-5.6 0c-1-0.3-3.5-4.8-3.5-13.2 0-8.1 3.7-13.1 4.9-13.2L16.4 5.6c0.9-1.9 2-3.7 3.4-5.2L11.2 0.5c-5.4 0-10.1 8.6-10.1 18.4 0 8.9 2.7 18.4 8.6 18.4h2.4c-1.8 10.7-6.6 43 0.4 56.5 0.7 1.4 4.3 3.4 12.2 4.6 20.2 3.1 49.8-0.5 54.6-5.3 0.7-0.7 1.3-1.7 1.8-2.9 2-0.3 8.2-1.7 12.4-8.4C100.1 71.5 98.9 53.9 90.1 29.7zM35.6 87.1c-2.6 2-10.5 2.1-12.1 2.1 0 0 0 0 0 0 -3.9 0-9-0.4-10.8-2.3 -2.6-2.7-1.5-13-0.6-19.1 -0.1-1.9 0-5.8 2.2-7.2 1.9-1.2 8.7-1.3 11.6-1.3 6.4 0 7.4 0.6 7.8 0.9 3 1.8 3.1 5.6 2.6 7.8C37.7 75.5 38.6 84.8 35.6 87.1zM70.1 87.5c-2.6 2-10.5 2.1-12.1 2.1 0 0 0 0 0 0 -3.9 0-9-0.4-10.8-2.3 -2.6-2.7-1.5-13-0.6-19.1 -0.1-1.9 0-5.8 2.2-7.2 1.9-1.2 8.7-1.3 11.6-1.3 6.4 0 7.4 0.6 7.8 0.9 3 1.8 3.1 5.6 2.6 7.8C72.2 76 73.1 85.3 70.1 87.5zM85.9 12.3c-0.6-1.3-1.3-2.2-1.9-2.5 -0.5-0.3-1-0.3-1.4 0 -1.7 1.1-3.2 12.2-0.6 17.9 0.4 0.9 0.9 1.1 1.3 1.1 0.1 0 0.2 0 0.3 0 1.8-0.5 2.1-6.2 1.7-8.6l-1.6 0.2c0.3 2.2 0 5.1-0.4 6.3 -2.1-5.3-0.8-14.1 0.1-15.5 0.8 0.6 2.2 3.5 3.1 8 -0.1 7.9-2.4 12.3-3.4 12.8 -1-0.5-3.4-5.2-3.4-13.5 0-8.3 2.4-13 3.4-13.5C83.7 5.4 85.1 7.9 85.9 12.3zM87.3 77.7c-1.4 2.3-3.1 3.6-4.6 4.3 1.2-12.2-1-31-3.5-44.7h3.3c0.1 0 0.3 0 0.4 0 0.6 0 1.2-0.1 1.8-0.4C92.8 60.7 90.7 72.2 87.3 77.7z" />
                    <path d="M24.7 71v5h-5.2v-5.4c-1.4-0.3-2.7-0.6-3.7-0.9 -0.9 6.8-1.1 13.3-0.3 14.5 0.4 0.3 2.9 1.1 8 1.1h0c5 0 8.8-0.7 9.7-1.3 0.8-1.3 0.6-7.7-0.4-14.4C30.7 70.1 27.5 70.8 24.7 71z" />
                    <path d="M58.8 68.9c2.9-0.1 6.4-0.9 8.3-1.4 0.1-0.8 0.3-2.8-0.7-3.5 -0.5-0.2-2.5-0.4-5.9-0.4 -4.9 0-8.6 0.4-9.5 0.7 -0.3 0.5-0.5 1.9-0.5 3.3C52.5 68.1 56 69 58.8 68.9z" />
                    <path d="M24.3 68.4c2.9-0.1 6.4-0.9 8.3-1.4 0.1-0.8 0.3-2.8-0.7-3.5 -0.5-0.2-2.5-0.4-5.9-0.4 -4.9 0-8.6 0.4-9.5 0.7 -0.3 0.5-0.5 1.9-0.5 3.3C18 67.7 21.5 68.6 24.3 68.4z" />
                    <path d="M60.1 71.4v3.3h-5.2v-3.4c-1.7-0.3-3.3-0.7-4.6-1 -0.9 6.8-1.1 13.3-0.3 14.5 0.4 0.3 2.9 1.1 8 1.1h0c5 0 8.8-0.7 9.7-1.3 0.8-1.3 0.6-7.7-0.4-14.4C65.5 70.5 62.7 71.1 60.1 71.4z" />
                </svg>
            </a>
            <span class="cart-counter">3</span>
        </div>
    </header>

    <main class="divider">
        <section class="products">
            <h2>My Cart</h2>

            <ul class="product-list">
                <!-- Cart items will be dynamically inserted here -->
            </ul>
        </section>
    </main>

    <footer>
        <a href="../index.html">Back to Shop</a> | 
        <a href="../checkout/index.html" class="checkout-btn">Proceed to Checkout</a>
        <p>&copy; NOT a real business</p>
    </footer>

    <script>
        // cart.js - Dynamic Cart Display and Total Calculation with localStorage
        // Load cart data from localStorage or use sample data
        function loadCartData() {
            const savedCart = localStorage.getItem('sleepOutsideCart');
            return savedCart ? JSON.parse(savedCart) : [
                {
                    id: "Dinku",
                    name: "Dinku Tent - 3-Person, 3-Season",
                    color: "Pale Pumpkin/Terracotta",
                    price: 199.99,
                    quantity: 1,
                    image: "https://via.placeholder.com/200x200/3498db/ffffff?text=Dinku+Tent",
                    link: "../product_pages/dinku-3.html"
                },
                {
                    id: "north-face-talus-4",
                    name: "The North Face Talus Tent - 4-Person, 3-Season",
                    color: "Golden Oak/Saffron Yellow",
                    price: 299.99,
                    quantity: 2,
                    image: "https://via.placeholder.com/200x200/e74c3c/ffffff?text=North+Face",
                    link: "../product_pages/north-face-talus-4.html"
                },
                {
                    id: "Moroni-discovery-4",
                    name: "Moroni Discovery 4-Person Tent",
                    color: "Orange/Gray",
                    price: 159.99,
                    quantity: 1,
                    image: "https://via.placeholder.com/200x200/2ecc71/ffffff?text=Moroni+Tent",
                    link: "../product_pages/moroni-discovery-4.html"
                }
            ];
        }

        // Save cart data to localStorage
        function saveCartData(cartData) {
            localStorage.setItem('sleepOutsideCart', JSON.stringify(cartData));
        }

        // Initialize cart data
        let cartData = loadCartData();

        // Function to create cart item HTML
        function createCartItemHTML(item) {
            const itemTotal = (item.price * item.quantity).toFixed(2);
            
            return `
                <li class="cart-card divider" data-id="${item.id}">
                    <a href="${item.link}" class="cart-card__image">
                        <img src="${item.image}" alt="${item.name}" />
                    </a>
                    <div class="cart-card__details">
                        <a href="${item.link}">
                            <h2 class="card__name">${item.name}</h2>
                        </a>
                        <p class="cart-card__color">${item.color}</p>
                        <div class="cart-card__quantity">
                            <label for="qty-${item.id}">Qty:</label>
                            <input type="number" id="qty-${item.id}" value="${item.quantity}" min="1" max="10" class="quantity-input">
                            <button class="remove-item" data-id="${item.id}">Remove</button>
                        </div>
                        <p class="cart-card__price">$${item.price.toFixed(2)} each</p>
                        <p class="cart-card__total"><strong>Total: $${itemTotal}</strong></p>
                    </div>
                </li>
            `;
        }

        // Function to calculate cart totals
        function calculateCartTotals() {
            let subtotal = 0;
            let totalItems = 0;
            
            cartData.forEach(item => {
                subtotal += item.price * item.quantity;
                totalItems += item.quantity;
            });
            
            const tax = subtotal * 0.08;
            const shipping = subtotal > 100 ? 0 : 10;
            const total = subtotal + tax + shipping;
            
            return {
                subtotal: subtotal.toFixed(2),
                tax: tax.toFixed(2),
                shipping: shipping.toFixed(2),
                total: total.toFixed(2),
                totalItems: totalItems
            };
        }

        // Function to create cart summary HTML
        function createCartSummaryHTML(totals) {
            return `
                <div class="cart-summary">
                    <h3>Order Summary</h3>
                    <div class="summary-line">
                        <span>Subtotal (${totals.totalItems} items):</span>
                        <span>$${totals.subtotal}</span>
                    </div>
                    <div class="summary-line">
                        <span>Tax:</span>
                        <span>$${totals.tax}</span>
                    </div>
                    <div class="summary-line">
                        <span>Shipping:</span>
                        <span>${totals.shipping === '0.00' ? 'FREE' : '$' + totals.shipping}</span>
                    </div>
                    <div class="summary-line total-line">
                        <span><strong>Total:</strong></span>
                        <span><strong>$${totals.total}</strong></span>
                    </div>
                    <a href="../checkout/index.html" class="checkout-btn">Proceed to Checkout</a>
                </div>
            `;
        }

        // Function to update cart display
        function updateCartDisplay() {
            const productList = document.querySelector('.product-list');
            const cartSection = document.querySelector('.products');
            
            // Remove existing summary if any
            const existingSummary = cartSection.querySelector('.cart-summary');
            if (existingSummary) {
                existingSummary.remove();
            }
            
            if (cartData.length === 0) {
                productList.innerHTML = `
                    <li class="empty-cart">
                        <h3>Your cart is empty</h3>
                        <p>Continue browsing <a href="../index.html">here</a>.</p>
                    </li>
                `;
                updateCartCounter(0);
                return;
            }
            
            // Clear existing content
            productList.innerHTML = '';
            
            // Add cart items
            cartData.forEach(item => {
                productList.innerHTML += createCartItemHTML(item);
            });
            
            // Add cart summary
            const totals = calculateCartTotals();
            cartSection.innerHTML += createCartSummaryHTML(totals);
            
            // Update cart counter in header
            updateCartCounter(totals.totalItems);
        }

        // Function to update cart counter in header
        function updateCartCounter(count) {
            const counter = document.querySelector('.cart-counter');
            counter.textContent = count;
            counter.style.display = count > 0 ? 'flex' : 'none';
        }

        // Function to handle quantity changes
        function handleQuantityChange(event) {
            if (event.target.classList.contains('quantity-input')) {
                const itemId = event.target.id.replace('qty-', '');
                const newQuantity = parseInt(event.target.value);
                
                const item = cartData.find(item => item.id === itemId);
                if (item && newQuantity > 0) {
                    item.quantity = newQuantity;
                    saveCartData(cartData);
                    updateCartDisplay();
                }
            }
        }

        // Function to handle item removal
        function handleRemoveItem(event) {
            if (event.target.classList.contains('remove-item')) {
                const itemId = event.target.dataset.id;
                const itemIndex = cartData.findIndex(item => item.id === itemId);
                
                if (itemIndex > -1) {
                    cartData.splice(itemIndex, 1);
                    saveCartData(cartData);
                    updateCartDisplay();
                }
            }
        }

        // Initialize cart when page loads
        document.addEventListener('DOMContentLoaded', function() {
            updateCartDisplay();
            
            // Add event listeners
            document.addEventListener('change', handleQuantityChange);
            document.addEventListener('click', handleRemoveItem);
        });
    </script>
</body>
</html>